{% if entry.type == "episode" %}
    {% set episode = entry.episode %}
    {% set season = episode.season %}
    {% set show = season.show %}
    {% set imageUrl = episode.posterImageUrl %}
    {% set views = episode.viewsForUser(app.user) %}
    <div class="d-none" data-entry-type="{{ entry.type }}" data-entry-id="{{ entry.id }}" data-views="{{ views|length }}" data-show="{{ show.id }}" data-season="{{ season.number }}" data-episode="{{ episode.number }}"></div>
{% elseif entry.type == "movie" %}
    {% set movie = entry.movie %}
    {% set imageUrl = movie.posterImageUrl %}
    {% set views = movie.viewsForUser(app.user) %}
    <div class="d-none" data-entry-type="{{ entry.type }}" data-entry-id="{{ entry.id }}" data-views="{{ views|length }}" data-movie="{{ movie.id }}"></div>
{% endif %}

<div class="card">
    <img class="card-img-top" src="{{ imageUrl }}"/>
    <div class="card-body">
        {% if entry.type == "episode" %}
            <h5 class="card-title"><a class="text-reset text-decoration-none" href="{{ path("episodePage", {"show": show.id, "seasonNumber": season.number, "episodeNumber": episode.number}) }}"><b>{{ season.number }}x{{ episode.number }}</b> {{ episode.title|default("unknown-title"|trans) }}</a></h5>
            <div><a class="text-reset text-decoration-none" href="{{ path("showOverviewPage", {"id": show.id}) }}">{{ show.title }}</a></div>
        {% elseif entry.type == "movie" %}
            <h5 class="card-title"><a class="text-reset text-decoration-none" href="{{ path("moviePage", {"movie": movie.id}) }}">{{ movie.title }}</a></h5>
        {% endif %}
        <div class="text-body-secondary">{{ entry.datetime|format_datetime }}</div>
    </div>
    <div class="card-footer">
        <button class="btn btn-sm history-edit-button" type="button" title="{{ views|length }} views"><i class="fa-solid fa-check"></i></button>
    </div>
</div>